import{r as A,j as $,R as ve}from"./index-DP3cqZMk.js";import{e as rr,u as ir,f as Ze,s as qr,N as tr,T as er,j as he}from"./owner-eagQWD7v.js";import{c as le,a as Ee,M as et,b as rt}from"./StyledButton-Dw1NSLdk.js";import"./provider-CEmImVai.js";import{p as Oe,u as tt}from"./viewport-CIRotvhe.js";import{d as nt}from"./index-ruaAFTxf.js";import{m as at,i as ot,u as ur}from"./use-ref-value-Bw8XjGYB.js";import{A as st}from"./Shiki-BY37ZjXb.js";import{u as lr,a as it}from"./use-motion-template-CG2NZtUh.js";import{m as ut}from"./proxy-Nduva4Ti.js";import{u as lt}from"./use-event-callback-CNvn5lcI.js";let ct=Object.freeze([]),ft=e=>{let t=A.useRef(!1);!t.current&&(t.current=!0,e?.())},Fr=()=>{var e;let t=A.createContext(null),a=rr(null),r=A.memo(n=>{var o;let{data:u,children:l}=n,E=(o=A.useContext(t))!==null&&o!==void 0?o:a,g=ir(E);return ft(()=>{g(u)}),A.useEffect(()=>{g(u)},[u]),A.useEffect(()=>(g(u),()=>{g(null)}),[]),l});return r.displayName="ModelDataProvider",{ModelDataAtomProvider:n=>{let{children:o,overrideAtom:u}=n;return $.jsx(t.Provider,{value:u??a,children:o})},ModelDataProvider:r,useModelDataSelector:(n,o)=>{var u;let l=(u=A.useContext(t))!==null&&u!==void 0?u:a,E=A.useCallback(g=>g?n(g):null,o||ct);return Ze(qr(l,E))},useSetModelData:()=>ir((e=A.useContext(t))!==null&&e!==void 0?e:a),useGetModelData:()=>{var n;let o=(n=A.useContext(t))!==null&&n!==void 0?n:a,u=tr();return()=>u.get(o)},useModelData:()=>{var n;return Ze((n=A.useContext(t))!==null&&n!==void 0?n:a)},setGlobalModelData:n=>{let o=er();o.set(a,Oe(o.get(a),n))},getGlobalModelData:()=>er().get(a),ModelDataAtomContext:t}},cr=er();cr.get,cr.set;var pt={},$r={exports:{}};(function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})($r);var Pe=$r.exports,Gr={exports:{}};(function(e){function t(a){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Gr);var be=Gr.exports,Re={exports:{}},fr;function dt(){return fr||(fr=1,function(e){var t=be.default;function a(){e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var r,n={},o=Object.prototype,u=o.hasOwnProperty,l=Object.defineProperty||function(c,i,p){c[i]=p.value},E=typeof Symbol=="function"?Symbol:{},g=E.iterator||"@@iterator",U=E.asyncIterator||"@@asyncIterator",s=E.toStringTag||"@@toStringTag";function v(c,i,p){return Object.defineProperty(c,i,{value:p,enumerable:!0,configurable:!0,writable:!0}),c[i]}try{v({},"")}catch{v=function(p,S,O){return p[S]=O}}function w(c,i,p,S){var O=i&&i.prototype instanceof V?i:V,R=Object.create(O.prototype),f=new y(S||[]);return l(R,"_invoke",{value:m(c,p,f)}),R}function _(c,i,p){try{return{type:"normal",arg:c.call(i,p)}}catch(S){return{type:"throw",arg:S}}}n.wrap=w;var B="suspendedStart",H="suspendedYield",z="executing",D="completed",k={};function V(){}function W(){}function K(){}var Y={};v(Y,g,function(){return this});var N=Object.getPrototypeOf,Q=N&&N(N(ee([])));Q&&Q!==o&&u.call(Q,g)&&(Y=Q);var q=K.prototype=V.prototype=Object.create(Y);function j(c){["next","throw","return"].forEach(function(i){v(c,i,function(p){return this._invoke(i,p)})})}function C(c,i){function p(O,R,f,x){var b=_(c[O],c,R);if(b.type!=="throw"){var L=b.arg,I=L.value;return I&&t(I)=="object"&&u.call(I,"__await")?i.resolve(I.__await).then(function(T){p("next",T,f,x)},function(T){p("throw",T,f,x)}):i.resolve(I).then(function(T){L.value=T,f(L)},function(T){return p("throw",T,f,x)})}x(b.arg)}var S;l(this,"_invoke",{value:function(R,f){function x(){return new i(function(b,L){p(R,f,b,L)})}return S=S?S.then(x,x):x()}})}function m(c,i,p){var S=B;return function(O,R){if(S===z)throw Error("Generator is already running");if(S===D){if(O==="throw")throw R;return{value:r,done:!0}}for(p.method=O,p.arg=R;;){var f=p.delegate;if(f){var x=d(f,p);if(x){if(x===k)continue;return x}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(S===B)throw S=D,p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);S=z;var b=_(c,i,p);if(b.type==="normal"){if(S=p.done?D:H,b.arg===k)continue;return{value:b.arg,done:p.done}}b.type==="throw"&&(S=D,p.method="throw",p.arg=b.arg)}}}function d(c,i){var p=i.method,S=c.iterator[p];if(S===r)return i.delegate=null,p==="throw"&&c.iterator.return&&(i.method="return",i.arg=r,d(c,i),i.method==="throw")||p!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+p+"' method")),k;var O=_(S,c.iterator,i.arg);if(O.type==="throw")return i.method="throw",i.arg=O.arg,i.delegate=null,k;var R=O.arg;return R?R.done?(i[c.resultName]=R.value,i.next=c.nextLoc,i.method!=="return"&&(i.method="next",i.arg=r),i.delegate=null,k):R:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,k)}function M(c){var i={tryLoc:c[0]};1 in c&&(i.catchLoc=c[1]),2 in c&&(i.finallyLoc=c[2],i.afterLoc=c[3]),this.tryEntries.push(i)}function P(c){var i=c.completion||{};i.type="normal",delete i.arg,c.completion=i}function y(c){this.tryEntries=[{tryLoc:"root"}],c.forEach(M,this),this.reset(!0)}function ee(c){if(c||c===""){var i=c[g];if(i)return i.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length)){var p=-1,S=function O(){for(;++p<c.length;)if(u.call(c,p))return O.value=c[p],O.done=!1,O;return O.value=r,O.done=!0,O};return S.next=S}}throw new TypeError(t(c)+" is not iterable")}return W.prototype=K,l(q,"constructor",{value:K,configurable:!0}),l(K,"constructor",{value:W,configurable:!0}),W.displayName=v(K,s,"GeneratorFunction"),n.isGeneratorFunction=function(c){var i=typeof c=="function"&&c.constructor;return!!i&&(i===W||(i.displayName||i.name)==="GeneratorFunction")},n.mark=function(c){return Object.setPrototypeOf?Object.setPrototypeOf(c,K):(c.__proto__=K,v(c,s,"GeneratorFunction")),c.prototype=Object.create(q),c},n.awrap=function(c){return{__await:c}},j(C.prototype),v(C.prototype,U,function(){return this}),n.AsyncIterator=C,n.async=function(c,i,p,S,O){O===void 0&&(O=Promise);var R=new C(w(c,i,p,S),O);return n.isGeneratorFunction(i)?R:R.next().then(function(f){return f.done?f.value:R.next()})},j(q),v(q,s,"Generator"),v(q,g,function(){return this}),v(q,"toString",function(){return"[object Generator]"}),n.keys=function(c){var i=Object(c),p=[];for(var S in i)p.push(S);return p.reverse(),function O(){for(;p.length;){var R=p.pop();if(R in i)return O.value=R,O.done=!1,O}return O.done=!0,O}},n.values=ee,y.prototype={constructor:y,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!i)for(var p in this)p.charAt(0)==="t"&&u.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=r)},stop:function(){this.done=!0;var i=this.tryEntries[0].completion;if(i.type==="throw")throw i.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var p=this;function S(L,I){return f.type="throw",f.arg=i,p.next=L,I&&(p.method="next",p.arg=r),!!I}for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O],f=R.completion;if(R.tryLoc==="root")return S("end");if(R.tryLoc<=this.prev){var x=u.call(R,"catchLoc"),b=u.call(R,"finallyLoc");if(x&&b){if(this.prev<R.catchLoc)return S(R.catchLoc,!0);if(this.prev<R.finallyLoc)return S(R.finallyLoc)}else if(x){if(this.prev<R.catchLoc)return S(R.catchLoc,!0)}else{if(!b)throw Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return S(R.finallyLoc)}}}},abrupt:function(i,p){for(var S=this.tryEntries.length-1;S>=0;--S){var O=this.tryEntries[S];if(O.tryLoc<=this.prev&&u.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var R=O;break}}R&&(i==="break"||i==="continue")&&R.tryLoc<=p&&p<=R.finallyLoc&&(R=null);var f=R?R.completion:{};return f.type=i,f.arg=p,R?(this.method="next",this.next=R.finallyLoc,k):this.complete(f)},complete:function(i,p){if(i.type==="throw")throw i.arg;return i.type==="break"||i.type==="continue"?this.next=i.arg:i.type==="return"?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):i.type==="normal"&&p&&(this.next=p),k},finish:function(i){for(var p=this.tryEntries.length-1;p>=0;--p){var S=this.tryEntries[p];if(S.finallyLoc===i)return this.complete(S.completion,S.afterLoc),P(S),k}},catch:function(i){for(var p=this.tryEntries.length-1;p>=0;--p){var S=this.tryEntries[p];if(S.tryLoc===i){var O=S.completion;if(O.type==="throw"){var R=O.arg;P(S)}return R}}throw Error("illegal catch attempt")},delegateYield:function(i,p,S){return this.delegate={iterator:ee(i),resultName:p,nextLoc:S},this.method==="next"&&(this.arg=r),k}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Re)),Re.exports}var _e,pr;function nr(){if(pr)return _e;pr=1;var e=dt()();_e=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return _e}var Me={exports:{}},Ae={exports:{}},je={exports:{}},dr;function vt(){return dr||(dr=1,function(e){var t=be.default;function a(r,n){if(t(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var u=o.call(r,n||"default");if(t(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(je)),je.exports}var vr;function Br(){return vr||(vr=1,function(e){var t=be.default,a=vt();function r(n){var o=a(n,"string");return t(o)=="symbol"?o:o+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ae)),Ae.exports}var hr;function Se(){return hr||(hr=1,function(e){var t=Br();function a(r,n,o){return(n=t(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Me)),Me.exports}var Ne={exports:{}},gr;function ar(){return gr||(gr=1,function(e){function t(r,n,o,u,l,E,g){try{var U=r[E](g),s=U.value}catch(v){return void o(v)}U.done?n(s):Promise.resolve(s).then(u,l)}function a(r){return function(){var n=this,o=arguments;return new Promise(function(u,l){var E=r.apply(n,o);function g(s){t(E,u,l,g,U,"next",s)}function U(s){t(E,u,l,g,U,"throw",s)}g(void 0)})}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ne)),Ne.exports}var Le={exports:{}},Te={exports:{}},yr;function ht(){return yr||(yr=1,function(e){function t(a){if(Array.isArray(a))return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Te.exports}var ke={exports:{}},br;function gt(){return br||(br=1,function(e){function t(a,r){var n=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n!=null){var o,u,l,E,g=[],U=!0,s=!1;try{if(l=(n=n.call(a)).next,r===0){if(Object(n)!==n)return;U=!1}else for(;!(U=(o=l.call(n)).done)&&(g.push(o.value),g.length!==r);U=!0);}catch(v){s=!0,u=v}finally{try{if(!U&&n.return!=null&&(E=n.return(),Object(E)!==E))return}finally{if(s)throw u}}return g}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ke)),ke.exports}var Ie={exports:{}},Ue={exports:{}},mr;function yt(){return mr||(mr=1,function(e){function t(a,r){(r==null||r>a.length)&&(r=a.length);for(var n=0,o=Array(r);n<r;n++)o[n]=a[n];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ue)),Ue.exports}var wr;function bt(){return wr||(wr=1,function(e){var t=yt();function a(r,n){if(r){if(typeof r=="string")return t(r,n);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(r,n):void 0}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ie)),Ie.exports}var De={exports:{}},xr;function mt(){return xr||(xr=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(De)),De.exports}var Er;function wt(){return Er||(Er=1,function(e){var t=ht(),a=gt(),r=bt(),n=mt();function o(u,l){return t(u)||a(u,l)||r(u,l)||n()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(Le)),Le.exports}var pe={},G={},qe={exports:{}},Or;function zr(){return Or||(Or=1,function(e){function t(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(qe)),qe.exports}var Fe={exports:{}},Pr;function xt(){return Pr||(Pr=1,function(e){function t(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Fe)),Fe.exports}var $e={exports:{}},Sr;function Et(){return Sr||(Sr=1,function(e){var t=Br();function a(n,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,t(l.key),l)}}function r(n,o,u){return o&&a(n.prototype,o),u&&a(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}($e)),$e.exports}var Ge={exports:{}},Be={exports:{}},Cr;function or(){return Cr||(Cr=1,function(e){function t(a,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},e.exports.__esModule=!0,e.exports.default=e.exports,t(a,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Be)),Be.exports}var Rr;function Ot(){return Rr||(Rr=1,function(e){var t=or();function a(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&t(r,n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ge)),Ge.exports}var ze={exports:{}},_r;function Pt(){return _r||(_r=1,function(e){var t=be.default,a=zr();function r(n,o){if(o&&(t(o)=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ze)),ze.exports}var He={exports:{}},Mr;function Hr(){return Mr||(Mr=1,function(e){function t(a){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(He)),He.exports}var We={exports:{}},Ke={exports:{}},Ar;function St(){return Ar||(Ar=1,function(e){function t(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ke)),Ke.exports}var Ve={exports:{}},Xe={exports:{}},jr;function Ct(){return jr||(jr=1,function(e){function t(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!a},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Xe)),Xe.exports}var Nr;function Rt(){return Nr||(Nr=1,function(e){var t=Ct(),a=or();function r(n,o,u){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,o);var E=new(n.bind.apply(n,l));return u&&a(E,u.prototype),E}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ve)),Ve.exports}var Lr;function _t(){return Lr||(Lr=1,function(e){var t=Hr(),a=or(),r=St(),n=Rt();function o(u){var l=typeof Map=="function"?new Map:void 0;return e.exports=o=function(g){if(g===null||!r(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(g))return l.get(g);l.set(g,U)}function U(){return n(g,arguments,t(this).constructor)}return U.prototype=Object.create(g.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),a(U,g)},e.exports.__esModule=!0,e.exports.default=e.exports,o(u)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(We)),We.exports}var Tr;function Mt(){if(Tr)return G;Tr=1;var e=Pe;Object.defineProperty(G,"__esModule",{value:!0}),G.UnsupportedStrategy=G.UnknownError=G.OAuthCallbackError=G.MissingSecret=G.MissingAuthorize=G.MissingAdapterMethods=G.MissingAdapter=G.MissingAPIRoute=G.InvalidCallbackUrl=G.AccountNotLinkedError=void 0,G.adapterErrorHandler=q,G.capitalize=N,G.eventsErrorHandler=Q,G.upperSnake=Y;var t=e(nr()),a=e(ar()),r=e(zr()),n=e(Se()),o=e(xt()),u=e(Et()),l=e(Ot()),E=e(Pt()),g=e(Hr()),U=e(_t());function s(j){var C=v();return function(){var d=(0,g.default)(j),M;if(C){var P=(0,g.default)(this).constructor;M=Reflect.construct(d,arguments,P)}else M=d.apply(this,arguments);return(0,E.default)(this,M)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(j){(0,l.default)(m,j);var C=s(m);function m(d){var M,P;return(0,o.default)(this,m),P=C.call(this,(M=d?.message)!==null&&M!==void 0?M:d),P.name="UnknownError",P.code=d.code,d instanceof Error&&(P.stack=d.stack),P}return(0,u.default)(m,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),m}((0,U.default)(Error));G.UnknownError=w;var _=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","OAuthCallbackError"),d}return(0,u.default)(m)}(w);G.OAuthCallbackError=_;var B=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","AccountNotLinkedError"),d}return(0,u.default)(m)}(w);G.AccountNotLinkedError=B;var H=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","MissingAPIRouteError"),(0,n.default)((0,r.default)(d),"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),d}return(0,u.default)(m)}(w);G.MissingAPIRoute=H;var z=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","MissingSecretError"),(0,n.default)((0,r.default)(d),"code","NO_SECRET"),d}return(0,u.default)(m)}(w);G.MissingSecret=z;var D=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","MissingAuthorizeError"),(0,n.default)((0,r.default)(d),"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),d}return(0,u.default)(m)}(w);G.MissingAuthorize=D;var k=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","MissingAdapterError"),(0,n.default)((0,r.default)(d),"code","EMAIL_REQUIRES_ADAPTER_ERROR"),d}return(0,u.default)(m)}(w);G.MissingAdapter=k;var V=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","MissingAdapterMethodsError"),(0,n.default)((0,r.default)(d),"code","MISSING_ADAPTER_METHODS_ERROR"),d}return(0,u.default)(m)}(w);G.MissingAdapterMethods=V;var W=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","UnsupportedStrategyError"),(0,n.default)((0,r.default)(d),"code","CALLBACK_CREDENTIALS_JWT_ERROR"),d}return(0,u.default)(m)}(w);G.UnsupportedStrategy=W;var K=function(j){(0,l.default)(m,j);var C=s(m);function m(){var d;(0,o.default)(this,m);for(var M=arguments.length,P=new Array(M),y=0;y<M;y++)P[y]=arguments[y];return d=C.call.apply(C,[this].concat(P)),(0,n.default)((0,r.default)(d),"name","InvalidCallbackUrl"),(0,n.default)((0,r.default)(d),"code","INVALID_CALLBACK_URL_ERROR"),d}return(0,u.default)(m)}(w);G.InvalidCallbackUrl=K;function Y(j){return j.replace(/([A-Z])/g,"_$1").toUpperCase()}function N(j){return"".concat(j[0].toUpperCase()).concat(j.slice(1))}function Q(j,C){return Object.keys(j).reduce(function(m,d){return m[d]=(0,a.default)(t.default.mark(function M(){var P,y=arguments;return t.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,P=j[d],c.next=4,P.apply(void 0,y);case 4:return c.abrupt("return",c.sent);case 7:c.prev=7,c.t0=c.catch(0),C.error("".concat(Y(d),"_EVENT_ERROR"),c.t0);case 10:case"end":return c.stop()}},M,null,[[0,7]])})),m},{})}function q(j,C){if(j)return Object.keys(j).reduce(function(m,d){return m[d]=(0,a.default)(t.default.mark(function M(){var P,y,ee,c,i,p=arguments;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:for(O.prev=0,P=p.length,y=new Array(P),ee=0;ee<P;ee++)y[ee]=p[ee];return C.debug("adapter_".concat(d),{args:y}),c=j[d],O.next=6,c.apply(void 0,y);case 6:return O.abrupt("return",O.sent);case 9:throw O.prev=9,O.t0=O.catch(0),C.error("adapter_error_".concat(d),O.t0),i=new w(O.t0),i.name="".concat(N(d),"Error"),i;case 15:case"end":return O.stop()}},M,null,[[0,9]])})),m},{})}return G}var kr;function At(){if(kr)return pe;kr=1;var e=Pe;Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0,pe.proxyLogger=U,pe.setLogger=E;var t=e(Se()),a=Mt();function r(s,v){var w=Object.keys(s);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);v&&(_=_.filter(function(B){return Object.getOwnPropertyDescriptor(s,B).enumerable})),w.push.apply(w,_)}return w}function n(s){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?r(Object(w),!0).forEach(function(_){(0,t.default)(s,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(_){Object.defineProperty(s,_,Object.getOwnPropertyDescriptor(w,_))})}return s}function o(s){if(s instanceof Error&&!(s instanceof a.UnknownError))return{message:s.message,stack:s.stack,name:s.name};if(u(s)){var v;s.error=o(s.error),s.message=(v=s.message)!==null&&v!==void 0?v:s.error.message}return s}function u(s){return!!(s!=null&&s.error)}var l={error:function(v,w){w=o(w),console.error("[next-auth][error][".concat(v,"]"),`
https://next-auth.js.org/errors#`.concat(v.toLowerCase()),w.message,w)},warn:function(v){console.warn("[next-auth][warn][".concat(v,"]"),`
https://next-auth.js.org/warnings#`.concat(v.toLowerCase()))},debug:function(v,w){console.log("[next-auth][debug][".concat(v,"]"),w)}};function E(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0;v||(l.debug=function(){}),s.error&&(l.error=s.error),s.warn&&(l.warn=s.warn),s.debug&&(l.debug=s.debug)}var g=l;pe.default=g;function U(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l,v=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return s;var w={},_=function(z){w[z]=function(D,k){l[z](D,k),z==="error"&&(k=o(k)),k.client=!0;var V="".concat(v,"/_log"),W=new URLSearchParams(n({level:z,code:D},k));return navigator.sendBeacon?navigator.sendBeacon(V,W):fetch(V,{method:"POST",body:W,keepalive:!0})}};for(var B in s)_(B);return w}catch{return l}}return pe}var we={},Ir;function jt(){if(Ir)return we;Ir=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=e;function e(t){var a;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const n=new URL((a=t)!==null&&a!==void 0?a:r),o=(n.pathname==="/"?r.pathname:n.pathname).replace(/\/$/,""),u=`${n.origin}${o}`;return{origin:n.origin,host:n.host,path:o,base:u,toString:()=>u}}return we}var de={},Ur;function Nt(){if(Ur)return de;Ur=1;var e=Pe;Object.defineProperty(de,"__esModule",{value:!0}),de.BroadcastChannel=U,de.apiBaseUrl=E,de.fetchData=u,de.now=g;var t=e(nr()),a=e(Se()),r=e(ar());function n(s,v){var w=Object.keys(s);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);v&&(_=_.filter(function(B){return Object.getOwnPropertyDescriptor(s,B).enumerable})),w.push.apply(w,_)}return w}function o(s){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?n(Object(w),!0).forEach(function(_){(0,a.default)(s,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(w)):n(Object(w)).forEach(function(_){Object.defineProperty(s,_,Object.getOwnPropertyDescriptor(w,_))})}return s}function u(s,v,w){return l.apply(this,arguments)}function l(){return l=(0,r.default)(t.default.mark(function s(v,w,_){var B,H,z,D,k,V,W,K,Y,N=arguments;return t.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return B=N.length>3&&N[3]!==void 0?N[3]:{},H=B.ctx,z=B.req,D=z===void 0?H?.req:z,k="".concat(E(w),"/").concat(v),q.prev=2,W={headers:o({"Content-Type":"application/json"},D!=null&&(V=D.headers)!==null&&V!==void 0&&V.cookie?{cookie:D.headers.cookie}:{})},D!=null&&D.body&&(W.body=JSON.stringify(D.body),W.method="POST"),q.next=7,fetch(k,W);case 7:return K=q.sent,q.next=10,K.json();case 10:if(Y=q.sent,K.ok){q.next=13;break}throw Y;case 13:return q.abrupt("return",Object.keys(Y).length>0?Y:null);case 16:return q.prev=16,q.t0=q.catch(2),_.error("CLIENT_FETCH_ERROR",{error:q.t0,url:k}),q.abrupt("return",null);case 20:case"end":return q.stop()}},s,null,[[2,16]])})),l.apply(this,arguments)}function E(s){return typeof window>"u"?"".concat(s.baseUrlServer).concat(s.basePathServer):s.basePath}function g(){return Math.floor(Date.now()/1e3)}function U(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(w){var _=function(H){var z;if(H.key===s){var D=JSON.parse((z=H.newValue)!==null&&z!==void 0?z:"{}");D?.event!=="session"||!(D!=null&&D.data)||w(D)}};return window.addEventListener("storage",_),function(){return window.removeEventListener("storage",_)}},post:function(w){if(!(typeof window>"u"))try{localStorage.setItem(s,JSON.stringify(o(o({},w),{},{timestamp:g()})))}catch{}}}}return de}var Je={},Dr;function Lt(){return Dr||(Dr=1,Object.defineProperty(Je,"__esModule",{value:!0})),Je}(function(e){var t={NEXT_PUBLIC_API_URL:"https://mx.redhuang.dev/api/v2",NEXT_PUBLIC_GATEWAY_URL:"https://mx.redhuang.dev",TMDB_API_KEY:"",GH_TOKEN:""},a=Pe,r=be;Object.defineProperty(e,"__esModule",{value:!0});var n={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=R,e.getCsrfToken=P,e.getProviders=ee,e.getSession=d,e.signIn=i,e.signOut=S,e.useSession=m;var o=a(nr()),u=a(Se()),l=a(ar()),E=a(wt()),g=W(A),U=W(At()),s=a(jt()),v=Nt(),w=$,_=Lt();Object.keys(_).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(n,f)||f in e&&e[f]===_[f]||Object.defineProperty(e,f,{enumerable:!0,get:function(){return _[f]}})});var B,H,z,D,k;function V(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,b=new WeakMap;return(V=function(I){return I?b:x})(f)}function W(f,x){if(f&&f.__esModule)return f;if(f===null||r(f)!=="object"&&typeof f!="function")return{default:f};var b=V(x);if(b&&b.has(f))return b.get(f);var L={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var J=I?Object.getOwnPropertyDescriptor(f,T):null;J&&(J.get||J.set)?Object.defineProperty(L,T,J):L[T]=f[T]}return L.default=f,b&&b.set(f,L),L}function K(f,x){var b=Object.keys(f);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(f);x&&(L=L.filter(function(I){return Object.getOwnPropertyDescriptor(f,I).enumerable})),b.push.apply(b,L)}return b}function Y(f){for(var x=1;x<arguments.length;x++){var b=arguments[x]!=null?arguments[x]:{};x%2?K(Object(b),!0).forEach(function(L){(0,u.default)(f,L,b[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(b)):K(Object(b)).forEach(function(L){Object.defineProperty(f,L,Object.getOwnPropertyDescriptor(b,L))})}return f}var N={baseUrl:(0,s.default)((B=t.NEXTAUTH_URL)!==null&&B!==void 0?B:t.VERCEL_URL).origin,basePath:(0,s.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,s.default)((H=(z=t.NEXTAUTH_URL_INTERNAL)!==null&&z!==void 0?z:t.NEXTAUTH_URL)!==null&&H!==void 0?H:t.VERCEL_URL).origin,basePathServer:(0,s.default)((D=t.NEXTAUTH_URL_INTERNAL)!==null&&D!==void 0?D:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},Q=(0,v.BroadcastChannel)(),q=(0,U.proxyLogger)(U.default,N.basePath);function j(){var f=g.useState(typeof navigator<"u"?navigator.onLine:!1),x=(0,E.default)(f,2),b=x[0],L=x[1],I=function(){return L(!0)},T=function(){return L(!1)};return g.useEffect(function(){return window.addEventListener("online",I),window.addEventListener("offline",T),function(){window.removeEventListener("online",I),window.removeEventListener("offline",T)}},[]),b}var C=(k=g.createContext)===null||k===void 0?void 0:k.call(g,void 0);e.SessionContext=C;function m(f){if(!C)throw new Error("React Context is unavailable in Server Components");var x=g.useContext(C),b=f??{},L=b.required,I=b.onUnauthenticated,T=L&&x.status==="unauthenticated";return g.useEffect(function(){if(T){var J="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));I?I():window.location.href=J}},[T,I]),T?{data:x.data,update:x.update,status:"loading"}:x}function d(f){return M.apply(this,arguments)}function M(){return M=(0,l.default)(o.default.mark(function f(x){var b,L;return o.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,v.fetchData)("session",N,q,x);case 2:return L=T.sent,(!((b=x?.broadcast)!==null&&b!==void 0)||b)&&Q.post({event:"session",data:{trigger:"getSession"}}),T.abrupt("return",L);case 5:case"end":return T.stop()}},f)})),M.apply(this,arguments)}function P(f){return y.apply(this,arguments)}function y(){return y=(0,l.default)(o.default.mark(function f(x){var b;return o.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,v.fetchData)("csrf",N,q,x);case 2:return b=I.sent,I.abrupt("return",b?.csrfToken);case 4:case"end":return I.stop()}},f)})),y.apply(this,arguments)}function ee(){return c.apply(this,arguments)}function c(){return c=(0,l.default)(o.default.mark(function f(){return o.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,v.fetchData)("providers",N,q);case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},f)})),c.apply(this,arguments)}function i(f,x,b){return p.apply(this,arguments)}function p(){return p=(0,l.default)(o.default.mark(function f(x,b,L){var I,T,J,ue,oe,te,ae,se,ce,F,me,ge,fe,Z,ie,ne,re;return o.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return I=b??{},T=I.callbackUrl,J=T===void 0?window.location.href:T,ue=I.redirect,oe=ue===void 0?!0:ue,te=(0,v.apiBaseUrl)(N),h.next=4,ee();case 4:if(ae=h.sent,ae){h.next=8;break}return window.location.href="".concat(te,"/error"),h.abrupt("return");case 8:if(!(!x||!(x in ae))){h.next=11;break}return window.location.href="".concat(te,"/signin?").concat(new URLSearchParams({callbackUrl:J})),h.abrupt("return");case 11:return se=ae[x].type==="credentials",ce=ae[x].type==="email",F=se||ce,me="".concat(te,"/").concat(se?"callback":"signin","/").concat(x),ge="".concat(me).concat(L?"?".concat(new URLSearchParams(L)):""),h.t0=fetch,h.t1=ge,h.t2={"Content-Type":"application/x-www-form-urlencoded"},h.t3=URLSearchParams,h.t4=Y,h.t5=Y({},b),h.t6={},h.next=25,P();case 25:return h.t7=h.sent,h.t8=J,h.t9={csrfToken:h.t7,callbackUrl:h.t8,json:!0},h.t10=(0,h.t4)(h.t5,h.t6,h.t9),h.t11=new h.t3(h.t10),h.t12={method:"post",headers:h.t2,body:h.t11},h.next=33,(0,h.t0)(h.t1,h.t12);case 33:return fe=h.sent,h.next=36,fe.json();case 36:if(Z=h.sent,!(oe||!F)){h.next=42;break}return ne=(ie=Z.url)!==null&&ie!==void 0?ie:J,window.location.href=ne,ne.includes("#")&&window.location.reload(),h.abrupt("return");case 42:if(re=new URL(Z.url).searchParams.get("error"),!fe.ok){h.next=46;break}return h.next=46,N._getSession({event:"storage"});case 46:return h.abrupt("return",{error:re,status:fe.status,ok:fe.ok,url:re?null:Z.url});case 47:case"end":return h.stop()}},f)})),p.apply(this,arguments)}function S(f){return O.apply(this,arguments)}function O(){return O=(0,l.default)(o.default.mark(function f(x){var b,L,I,T,J,ue,oe,te,ae,se;return o.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return L=x??{},I=L.callbackUrl,T=I===void 0?window.location.href:I,J=(0,v.apiBaseUrl)(N),F.t0={"Content-Type":"application/x-www-form-urlencoded"},F.t1=URLSearchParams,F.next=6,P();case 6:return F.t2=F.sent,F.t3=T,F.t4={csrfToken:F.t2,callbackUrl:F.t3,json:!0},F.t5=new F.t1(F.t4),ue={method:"post",headers:F.t0,body:F.t5},F.next=13,fetch("".concat(J,"/signout"),ue);case 13:return oe=F.sent,F.next=16,oe.json();case 16:if(te=F.sent,Q.post({event:"session",data:{trigger:"signout"}}),!(!((b=x?.redirect)!==null&&b!==void 0)||b)){F.next=23;break}return se=(ae=te.url)!==null&&ae!==void 0?ae:T,window.location.href=se,se.includes("#")&&window.location.reload(),F.abrupt("return");case 23:return F.next=25,N._getSession({event:"storage"});case 25:return F.abrupt("return",te);case 26:case"end":return F.stop()}},f)})),O.apply(this,arguments)}function R(f){if(!C)throw new Error("React Context is unavailable in Server Components");var x=f.children,b=f.basePath,L=f.refetchInterval,I=f.refetchWhenOffline;b&&(N.basePath=b);var T=f.session!==void 0;N._lastSync=T?(0,v.now)():0;var J=g.useState(function(){return T&&(N._session=f.session),f.session}),ue=(0,E.default)(J,2),oe=ue[0],te=ue[1],ae=g.useState(!T),se=(0,E.default)(ae,2),ce=se[0],F=se[1];g.useEffect(function(){return N._getSession=(0,l.default)(o.default.mark(function Z(){var ie,ne,re,ye=arguments;return o.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(ie=ye.length>0&&ye[0]!==void 0?ye[0]:{},ne=ie.event,X.prev=1,re=ne==="storage",!(re||N._session===void 0)){X.next=10;break}return N._lastSync=(0,v.now)(),X.next=7,d({broadcast:!re});case 7:return N._session=X.sent,te(N._session),X.abrupt("return");case 10:if(!(!ne||N._session===null||(0,v.now)()<N._lastSync)){X.next=12;break}return X.abrupt("return");case 12:return N._lastSync=(0,v.now)(),X.next=15,d();case 15:N._session=X.sent,te(N._session),X.next=22;break;case 19:X.prev=19,X.t0=X.catch(1),q.error("CLIENT_SESSION_ERROR",X.t0);case 22:return X.prev=22,F(!1),X.finish(22);case 25:case"end":return X.stop()}},Z,null,[[1,19,22,25]])})),N._getSession(),function(){N._lastSync=0,N._session=void 0,N._getSession=function(){}}},[]),g.useEffect(function(){var Z=Q.receive(function(){return N._getSession({event:"storage"})});return function(){return Z()}},[]),g.useEffect(function(){var Z=f.refetchOnWindowFocus,ie=Z===void 0?!0:Z,ne=function(){ie&&document.visibilityState==="visible"&&N._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",ne,!1),function(){return document.removeEventListener("visibilitychange",ne,!1)}},[f.refetchOnWindowFocus]);var me=j(),ge=I!==!1||me;g.useEffect(function(){if(L&&ge){var Z=setInterval(function(){N._session&&N._getSession({event:"poll"})},L*1e3);return function(){return clearInterval(Z)}}},[L,ge]);var fe=g.useMemo(function(){return{data:oe,status:ce?"loading":oe?"authenticated":"unauthenticated",update:function(ie){return(0,l.default)(o.default.mark(function ne(){var re;return o.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(ce||!oe)){h.next=2;break}return h.abrupt("return");case 2:return F(!0),h.t0=v.fetchData,h.t1=N,h.t2=q,h.next=8,P();case 8:return h.t3=h.sent,h.t4=ie,h.t5={csrfToken:h.t3,data:h.t4},h.t6={body:h.t5},h.t7={req:h.t6},h.next=15,(0,h.t0)("session",h.t1,h.t2,h.t7);case 15:return re=h.sent,F(!1),re&&(te(re),Q.post({event:"session",data:{trigger:"getSession"}})),h.abrupt("return",re);case 19:case"end":return h.stop()}},ne)}))()}}},[oe,ce]);return(0,w.jsx)(C.Provider,{value:fe,children:x})}})(pt);var Tt=(e=>(e.Home="//",e.Posts="/posts",e.Post="/posts/",e.Notes="/notes",e.Note="/notes/",e.NoteTopics="/notes/topics",e.NoteTopic="/notes/topics/",e.Timelime="/timeline",e.Login="/login",e.Page="/",e.Categories="/categories",e.Category="/categories/",e.Projects="/projects",e.Project="/projects/",e.Says="/says",e.Friends="/friends",e.Thinking="/thinking",e.PageDeletd="/common/deleted",e))(Tt||{});function ln(e,t){let a=e;switch(e){case"/notes/":{a+=t.id,t.password&&(a+=`?password=${t.password}`);break}case"/posts/":{const r=t;a+=`${r.category}/${r.slug}`;break}case"/posts":{const r=t;a+=`?${new URLSearchParams(r).toString()}`;break}case"/timeline":{const r=t;a+=`?${new URLSearchParams(r).toString()}`;break}case"/notes/topics/":case"/categories/":case"/":{a+=t.slug;break}case"//":{a="/";break}case"/projects/":{a+=t.id;break}}return a}A.createContext(null);A.createContext({reset(e,t){}});const{ModelDataProvider:cn,ModelDataAtomProvider:fn,getGlobalModelData:pn,setGlobalModelData:dn,useModelDataSelector:vn,useSetModelData:hn}=Fr(),{ModelDataProvider:gn,ModelDataAtomProvider:yn,getGlobalModelData:bn,setGlobalModelData:mn,useModelDataSelector:wn}=Fr(),xn=e=>["comments",e],Ye=e=>`ws_event:${e}`;class Wr extends Event{constructor(t,a){super(Ye(t)),this.data=a}static on(t,a){const r=n=>{a(n.data)};return document.addEventListener(Ye(t),r),()=>{document.removeEventListener(Ye(t),r)}}static emit(t,a){document.dispatchEvent(new Wr(t,a))}}var kt="Label",Kr=A.forwardRef((e,t)=>$.jsx(nt.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Kr.displayName=kt;var Vr=Kr;const It=A.createContext({}),Ut=()=>A.useContext(It),sr=A.forwardRef(({className:e,...t},a)=>{const r=Ut();return $.jsx(Vr,{ref:a,className:le("text-foreground-600 text-[1em] font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e,r.className),...t})});sr.displayName=Vr.displayName;const Dt=({errorMessage:e,id:t})=>$.jsx("div",{className:"mt-2",children:$.jsx(sr,{className:"text-xs font-medium text-error",htmlFor:t,children:e})}),qt=A.createContext({}),Ft=()=>A.useContext(qt),$t=ve.forwardRef((e,t)=>{const{className:a,type:r,label:n,isLoading:o,errorMessage:u,isInvalid:l,endContent:E,labelPlacement:g,inputClassName:U,bindValue:s,...v}=e,w=A.useId(),_=Ft(),{value:B,onChange:H,onBlur:z,onFocus:D,labelClassName:k,...V}=v,[W,K]=ve.useState(!1),Y=ve.useCallback(()=>{K(!0)},[]),N=ve.useCallback(()=>{K(!1)},[]),[Q,q]=ve.useState(v.value);A.useEffect(()=>{q(v.value)},[v.value]);const[j,C]=ve.useState(!1),m=at({},_,e),{labelPlacement:d="top"}=m,M=le(_.inputClassName,e.labelClassName),P=le(_.inputClassName,e.inputClassName);return $.jsxs("div",{className:"flex w-full flex-col",children:[$.jsxs("div",{className:le({"flex flex-col":d==="top","flex grow flex-row items-center":d==="left"},"peer relative",a),children:[n&&$.jsx(sr,{className:Ee({"mr-4":d==="left","mb-2 flex":d==="top"},d==="inside"&&{"absolute left-3 top-2 z-[1] select-none duration-200":!0,"text-primary":W,"bottom-2 top-2 flex items-center text-lg":!B&&!W},M),htmlFor:w,children:n}),$.jsxs("div",{className:"relative grow",children:[$.jsx("input",{id:w,value:ot(s)?Q:s,onChange:y=>{q(y.target.value),H?.(y)},onBlur:y=>{N(),z?.(y)},onFocus:y=>{Y(),D?.(y)},type:r==="password"&&!j?"password":"text",className:le("flex h-10 w-full rounded-md border px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50","border-zinc-200 bg-white placeholder:text-slate-500 focus-visible:border-primary dark:border-neutral-800 dark:bg-zinc-900",d==="inside"&&"h-auto pb-2 pt-8",r==="password"&&["pr-6",!j&&"font-mono"],o&&"pr-6",l&&"!border-red-400 !bg-red-600/50",P),ref:t,...V}),r==="password"&&!o&&$.jsx(et,{className:Qe({placement:d}),onClick:()=>{C(!j)},children:$.jsx("i",{className:Ee("text-lg text-gray-500",j?"icon-[mingcute--eye-line]":"icon-[mingcute--eye-close-line]")})}),!o&&E&&$.jsx("div",{className:Qe({placement:d}),children:E}),o&&$.jsx("div",{className:Qe({placement:d}),children:$.jsx("i",{className:"loading loading-spinner size-5 text-primary/80"})})]})]}),l&&u&&$.jsx(Dt,{id:w,errorMessage:u})]})}),Qe=rt({base:"absolute right-2",variants:{placement:{inside:"bottom-2",left:"bottom-0 top-0 flex items-center",top:"bottom-0 top-0 flex items-center"}}});$t.displayName="Input";const Xr=e=>{const{onKeyDown:t,onCompositionStart:a,onCompositionEnd:r}=e,n=A.useRef(!1),o=A.useCallback(E=>{n.current=!0,a?.(E)},[a]),u=A.useCallback(E=>{n.current=!1,r?.(E)},[r]),l=A.useCallback(E=>{if(n.current){E.stopPropagation();return}t?.(E)},[t]);return{onCompositionEnd:u,onCompositionStart:o,onKeyDown:l}},Jr=A.forwardRef(({className:e,...t},a)=>{const r=Xr(t);return $.jsx("input",{ref:a,className:le("min-w-0 flex-auto appearance-none rounded-lg border ring-accent/20 duration-200 sm:text-sm lg:text-base","bg-base-100 px-3 py-[calc(theme(spacing.2)-1px)] placeholder:text-zinc-400 focus:outline-none focus:ring-2 dark:bg-zinc-700/[0.15]","border-border","focus:!border-accent/80 focus:!bg-accent/5 dark:text-zinc-200 dark:placeholder:text-zinc-500",t.type==="password"?"font-mono placeholder:font-sans":"font-sans",e),...t,...r})});Jr.displayName="Input";const xe={sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl",default:"rounded"},Gt=A.forwardRef((e,t)=>{const{className:a,wrapperClassName:r,children:n,rounded:o="xl",bordered:u=!0,onCmdEnter:l,onKeyDown:E,...g}=e,U=lr(0),s=lr(0),v=A.useCallback(({clientX:k,clientY:V,currentTarget:W})=>{const K=W.getBoundingClientRect();U.set(k-K.left),s.set(V-K.top)},[U,s]),w=A.useCallback(k=>{k.key==="Enter"&&(k.metaKey||k.ctrlKey)&&l?.(k),E?.(k)},[l,E]),_=it`radial-gradient(320px circle at ${U}px ${s}px, var(--spotlight-color) 0%, transparent 85%)`,B=tt(),H=Xr(Object.assign({},e,{onKeyDown:w})),[z,D]=A.useState(!1);return $.jsxs("div",{className:le("group relative h-full border ring-0 ring-accent/20 duration-200 [--spotlight-color:oklch(var(--a)_/_0.12)]",xe[o],"border-transparent",z&&"border-accent/80 bg-accent/5 ring-2","dark:text-zinc-200 dark:placeholder:text-zinc-500",r),onMouseMove:v,children:[!B&&$.jsx(ut.div,{className:Ee("pointer-events-none absolute inset-0 z-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100",xe[o]),style:{background:_},"aria-hidden":"true"}),u&&$.jsx("div",{className:Ee("border-border pointer-events-none absolute inset-0 z-0 border",xe[o]),"aria-hidden":"true"}),$.jsx("textarea",{ref:t,className:le("size-full resize-none bg-transparent","overflow-auto px-3 py-4","!outline-none","text-neutral-900/80 dark:text-slate-100/80",xe[o],a),...g,onFocus:k=>{D(!0),g.onFocus?.(k)},onBlur:k=>{D(!1),g.onBlur?.(k)},...H}),n]})});Gt.displayName="TextArea";rr({});const Yr=A.createContext(null),Qr=A.createContext(null),Zr=()=>A.useContext(Yr),Bt=()=>A.useContext(Qr),zt=A.forwardRef((e,t)=>{const{showErrorMessage:a=!0,...r}=e,n=ur(()=>rr({})),o=ur(()=>({showErrorMessage:a,fields:n,getField:u=>he.get(n)[u],getCurrentValues:()=>Object.fromEntries(Object.entries(he.get(n)).map(([u,l])=>{const E=l.getEl()?.value;return[u,l.transform?l.transform?.(E):E]})),addField:(u,l)=>{he.set(n,E=>({...E,[u]:l}))},removeField:u=>{he.set(n,l=>{const E={...l};return delete E[u],E})}}));return A.useImperativeHandle(t,()=>o,[o]),$.jsx(Yr.Provider,{value:o,children:$.jsx(Qr.Provider,{value:A.useMemo(()=>({showErrorMessage:a}),[a]),children:$.jsx(Ht,{...r})})})});zt.displayName="Form";const Ht=e=>{const{onSubmit:t,...a}=e,r=Zr().fields,n=A.useCallback(async o=>{o.preventDefault();const u=he.get(r);for await(const[l,E]of Object.entries(u)){const g=E.getEl();if(!g)continue;const{value:U}=g,{rules:s}=E;for(const[v,w]of s.entries())try{if(!await w.validator(U)){console.error(`Form validation failed, at field \`${l}\`, got value \`${U}\``),g.focus(),w.message&&he.set(r,B=>Oe(B,H=>{H[l].rules[v].status="error"}));return}}catch(_){console.error("validate function throw error",_);return}}t?.(o)},[t]);return $.jsx("form",{onSubmit:n,...a,children:e.children})},Ce=()=>{const e=Zr();if(!e)throw new Error("FormInput must be used inside <FormContext />");return e},Wt=e=>{const t=Ce(),{fields:a}=t;return Ze(qr(a,A.useCallback(r=>{if(e)return r[e]?.rules.find(n=>n.status==="error")?.message},[e])))},Kt=({rules:e,transform:t,getEl:a,name:r})=>{const n=Ce(),{addField:o,removeField:u}=n,l=lt(a);A.useEffect(()=>{if(e&&r)return o(r,{rules:e,getEl:l,transform:t}),()=>{u(r)}},[o,l,r,u,e,t])},Vt=e=>{const t=tr(),a=Ce(),{fields:r}=a;return A.useCallback(()=>{t.set(r,n=>Oe(n,o=>{e&&o[e].rules.forEach(u=>{u.status==="error"&&(u.status="success")})}))},[r,t,e])},Xt=e=>{const t=tr(),a=Ce(),{fields:r}=a;return A.useCallback(()=>{t.set(r,n=>Oe(n,o=>{if(!e)return;const u=o[e].getEl()?.value;u&&o[e].rules.some(l=>{if(!l.validator(u))return l.status="error",!0})}))},[r,t,e])},Jt=A.memo(({className:e,rules:t,onKeyDown:a,transform:r,name:n,...o})=>{const{showErrorMessage:u}=Bt(),l=A.useRef(null),E=Wt(n);Kt({rules:t||[],transform:r,getEl:()=>l.current,name:n});const g=Vt(n),U=A.useCallback(v=>{a&&a(v),g()},[a,g]),s=Xt(n);return $.jsxs($.Fragment,{children:[$.jsx(Jr,{name:n,ref:l,className:le(!!E&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:U,onBlur:v=>{s(),o.onBlur?.(v)},...o}),u&&$.jsx(st,{duration:.2,children:$.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:E})})]})});Jt.displayName="FormInput";export{zt as F,Jr as I,yn as M,Tt as R,Gt as T,Wr as W,Jt as a,ln as b,gn as c,vn as d,fn as e,cn as f,pn as g,bn as h,mn as i,xn as j,Fr as p,pt as r,dn as s,wn as u};
